<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id$ -->

<project>

	<macrodef name="macro-deploy-spi">
		<attribute name="spilibs"/>
		<attribute name="thirdpartylibs"/>
		<attribute name="jbosshome"/>
		<sequential>
      
      <!-- BIN SCRIPTS -->
      <unzip dest="@{jbosshome}/bin" src="@{spilibs}/jbossws-spi-scripts.zip"/>
			<chmod dir="@{jbosshome}/bin" perm="+x" includes="*.sh"/>
      
      <!-- CLIENT JARS-->
			<copy todir="@{jbosshome}/client">
				<fileset dir="@{spilibs}">
					<include name="jbossws-spi.jar"/>
				</fileset>
				<fileset dir="@{thirdpartylibs}">
					<include name="wsdl4j.jar"/>
				</fileset>
			</copy>
      
      <!-- SERVER JARS-->
			<copy todir="@{jbosshome}/server/${jboss.server.instance}/lib">
				<fileset dir="@{spilibs}">
					<include name="jbossws-spi.jar"/>
				</fileset>
			</copy>
		</sequential>
	</macrodef>

	<macrodef name="macro-undeploy-spi">
		<attribute name="jbosshome"/>
		<sequential>
			<delete>
        <!-- BIN SCRIPTS -->
				<fileset dir="@{jbosshome}/bin">
					<include name="wsconsume.*"/>
					<include name="wsprovide.*"/>
				</fileset>
        
        <!-- CLIENT JARS-->
				<fileset dir="@{jbosshome}/client">
					<include name="jbossws-spi.jar"/>
					<include name="wsdl4j.jar"/>
				</fileset>
        
        <!-- SERVER JARS-->
				<fileset dir="@{jbosshome}/server/${jboss.server.instance}/lib">
					<include name="jbossws-spi.jar"/>
				</fileset>
			</delete>
		</sequential>
	</macrodef>

</project>